---
layout: content
style: 'ct-vertical-spacing--bottom'
title: Example auto suggest search
---

<link rel="stylesheet" href="accessible-autocomplete.min.css">
<style>
  

  .submitted {
    margin-top: 20px;
    padding: 15px;
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    border-radius: 4px;
    color: #155724;
  }

  .submitted--hidden {
    display: none;
  }

  /* Inline filter layout (GOV.UK gem-c-search__item behaviour) */
  .ct-inline-filter__item-wrapper {
    position: relative;
    display: table-cell;
    vertical-align: top;
  }

  .ct-inline-filter__items {
    display: table;
    width: 100%;
    border-collapse: separate;
  }

  .ct-inline-filter__item-wrapper:last-child {
    white-space: nowrap;
  }

  /* Autocomplete overrides */
  .autocomplete__hint,
  .autocomplete__input {
    -webkit-appearance: none;
    appearance: none;
    border: 2px solid #0b0c0c;
    border-radius: 0;
    box-sizing: border-box;
    height: 2.5rem;
    line-height: 1.25;
    margin-bottom: 0;
    width: 100%;
  }

  .autocomplete__input {
    height: 3rem !important;
    padding: 1rem !important;
    border-radius: var(--ct-textfield-border-radius) 0 0 var(--ct-textfield-border-radius) !important;
  }

  .autocomplete__hint, .autocomplete__option {
    padding: 1rem !important;
    appearance: none;
    margin: 0;
    font-size: var(--ct-typography-label-small-font-size);
    line-height: var(--ct-typography-label-small-line-height);
    font-family: var(--ct-typography-label-small-font-name);
    font-weight: var(--ct-typography-label-small-font-weight);
    letter-spacing: var(--ct-typography-label-small-letter-spacing);
}

.autocomplete__option--focused, .autocomplete__option:hover {
  
    background-color: var(--ct-button-light-primary-background-color);
    border-color: var(--ct-button-light-primary-border-color);
    color: var(--ct-button-light-primary-color);
}

  .ct-inline-filter__item-wrapper button {
    width: 3rem;
    height: 3rem;
    padding: 0 !important;
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
  }
</style>

  <div class="form-container">
    <form class="ct-inline-filter ct-theme-light" action="/betaga/search/" method="get">
      <label for="search-form" class="ct-label ct-theme-light ct-label--regular">Search for a topic, technology or requirement</label>

      <div class="ct-inline-filter__content">
        <div class="ct-inline-filter__items">

          <div class="ct-inline-filter__item-wrapper" style="width: 100%;">
            <div class="ct-field ct-theme-light ct-field--textfield ct-field--vertical">
              <h2 class="ct-visually-hidden" id="autocomplete-suggestions-heading">
                Suggested results
              </h2>
              <div class="ct-field__wrapper autocomplete-wrapper"></div>
            </div>
          </div>

          <div class="ct-inline-filter__item-wrapper">
            <button
              class="ct-button ct-theme-light ct-button--primary ct-button--button ct-button--regular"
              type="submit"
              data-component-name="button"
              data-button="true"
              style="padding:0 !important;"><span class="ct-visually-hidden">
            Search</span>
              <svg class="ct-search-icon" width="27" height="27" viewBox="0 0 27 27" fill="none" aria-hidden="true" focusable="false">
                <circle cx="12.0161" cy="11.0161" r="8.51613" stroke="currentColor" stroke-width="3" />
                <line x1="17.8668" y1="17.3587" x2="26.4475" y2="25.9393" stroke="currentColor" stroke-width="3" />
              </svg>
            </button>
          </div>

        </div>
      </div>
    </form>

    <div class="submitted submitted--hidden">
      <strong>Submitted:</strong> <span class="submitted__value"></span>
    </div>
  </div>

  <script src="accessible-autocomplete.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (typeof accessibleAutocomplete === 'undefined') {
        console.error('accessibleAutocomplete library not loaded');
        return;
      }

      fetch('{{ "/assets/search/content_titles-capabilities.json" | relative_url }}')
        .then(function (response) {
          if (!response.ok) throw new Error('Failed to load content titles');
          return response.json();
        })
        .then(function (suggestedContentTitles) {

          accessibleAutocomplete({
            element: document.querySelector('.autocomplete-wrapper'),
            id: 'search-form',
            name: 'query',
            source: function (query, populateResults) {
              const filtered = suggestedContentTitles.filter(function (title) {
                return title.toLowerCase().includes(query.toLowerCase());
              });
              populateResults(filtered.slice(0, 5));
            },
            minLength: 2,
            confirmOnBlur: false,
            autoselect: true,
            displayMenu: 'inline',
            showNoOptionsFound: true,
            inputClasses: 'ct-textfield ct-theme-light ct-field__control',

            // Adopted improvements
            tNoResults: () => 'No matching topic suggestions. Try fewer or different words.',
            tStatusNoResults: () => 'No matching results found.',
            tStatusResults: (results, query) =>
              `${results.length} results available for "${query}". Use arrow keys to navigate.`,

            menuAttributes: {
              'aria-labelledby': 'autocomplete-suggestions-heading'
            }
          });


          setTimeout(function () {
            const input = document.querySelector('#search-form');
            if (input) input.setAttribute('type', 'search');
          }, 0);

          const previouslySubmitted = window.location.search.length > 0;
          if (previouslySubmitted) {
            const submittedEl = document.querySelector('.submitted');
            if (submittedEl) {
              submittedEl.classList.remove('submitted--hidden');
              const params = new URLSearchParams(window.location.search);
              const submittedValue = document.querySelector('.submitted__value');
              if (submittedValue) submittedValue.textContent = params.get('query');
            }
          }
        })
        .catch(function (error) {
          console.error('Error loading content titles:', error);
          alert('Could not load search suggestions. Please refresh the page.');
        });
    });
  </script>